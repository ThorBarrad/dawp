(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42e5deb6"],{"0b1a":function(e,t,a){"use strict";a("481b")},"1cb3":function(e,t,a){"use strict";a("76a5")},"21a6":function(e,t,a){(function(a){var o,i,s;(function(a,n){i=[],o=n,s="function"===typeof o?o.apply(t,i):o,void 0===s||(e.exports=s)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function o(e,t,a){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){r(o.response,t,a)},o.onerror=function(){console.error("could not download file")},o.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,l=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,a){var l=n.URL||n.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin===location.origin?s(r):i(r.href)?o(e,t,a):s(r,r.target="_blank")):(r.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(r.href)}),4e4),setTimeout((function(){s(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,n){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,n),a);else if(i(e))o(e,a,n);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){s(l)}))}}:function(e,t,a,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return o(e,t,a);var s="application/octet-stream"===e.type,r=/constructor/i.test(n.HTMLElement)||n.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||s&&r||l)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=p?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var d=n.URL||n.webkitURL,m=d.createObjectURL(e);i?i.location=m:location.href=m,i=null,setTimeout((function(){d.revokeObjectURL(m)}),4e4)}});n.saveAs=r.saveAs=r,e.exports=r}))}).call(this,a("c8ba"))},"481b":function(e,t,a){},"64b1":function(e,t,a){e.exports=a.p+"static/img/tou.af7b0cdd.png"},"76a5":function(e,t,a){},e382:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",{staticClass:"mycard",attrs:{id:"container"}},[o("el-row",{staticClass:"myrow",attrs:{gutter:0}},[o("el-col",{attrs:{span:2}},[o("el-image",{directives:[{name:"show",rawName:"v-show",value:"None"!=e.personal.headpic,expression:"personal.headpic!='None'"}],staticClass:"personalimg",attrs:{src:e.prefix.image+e.personal.headpic}}),o("img",{directives:[{name:"show",rawName:"v-show",value:"None"==e.personal.headpic,expression:"personal.headpic=='None'"}],staticClass:"personalimg",attrs:{src:a("64b1")}})],1),o("el-col",{attrs:{span:20}},[o("div",{staticClass:"myinfo"},[o("div",{staticClass:"title"},[e._v(e._s("昵称: "+e.personal.name))]),o("div",{staticClass:"smalltitle"},[e._v(e._s("简介: "+e.personal.description))]),o("div",{staticClass:"smalltitle"},[e._v(e._s("vip: "+e.personal.usergroup))])])]),o("el-col",{attrs:{span:2}},[o("el-button",{staticClass:"rightbuttom",attrs:{type:"danger",plain:""},on:{click:e.add_top_bg}},[e._v("修改信息")])],1)],1),o("el-divider"),o("el-form",{attrs:{size:"mini"}},[o("el-form-item",{staticClass:"myrow1"},[o("div",{staticClass:"smalltitle"},[e._v("我的收藏")]),o("el-row",{staticClass:"work-list",staticStyle:{"margin-top":"10px"},attrs:{gutter:10}},e._l(e.personal.top_bg_list,(function(t,a){return o("el-col",{key:a,attrs:{span:4}},[o("el-card",[o("el-image",{directives:[{name:"show",rawName:"v-show",value:!t.vid,expression:"!item.vid"}],staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{src:e.prefix.image+t.name}}),o("video-player",{directives:[{name:"show",rawName:"v-show",value:t.vid,expression:"item.vid"}],ref:"videoPlayer",refInFor:!0,staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:{autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:e.prefix.image+t.name}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!1,durationDisplay:!1,remainingTimeDisplay:!1,fullscreenToggle:!1}}}}),o("el-button",{staticClass:"btn",attrs:{type:"danger",plain:""},on:{click:function(a){return e.removefav(t)}}},[e._v("取消")]),o("el-button",{staticClass:"btn1",attrs:{type:"danger",plain:""},on:{click:function(a){return e.download(t)}}},[e._v("下载")])],1)],1)})),1)],1),o("el-form-item",{staticClass:"myrow2"},[o("div",{staticClass:"smalltitle"},[e._v("我的收藏")]),o("el-row",{staticClass:"work-list",staticStyle:{"margin-top":"10px"},attrs:{gutter:10}},e._l(e.personal.top_bg_list,(function(t,a){return o("el-col",{key:a,attrs:{span:24}},[o("el-card",[o("el-image",{directives:[{name:"show",rawName:"v-show",value:!t.vid,expression:"!item.vid"}],staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{src:e.prefix.image+t.name}}),o("video-player",{directives:[{name:"show",rawName:"v-show",value:t.vid,expression:"item.vid"}],ref:"videoPlayer",refInFor:!0,staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:{autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:e.prefix.image+t.name}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!1,durationDisplay:!1,remainingTimeDisplay:!1,fullscreenToggle:!1}}}}),o("el-button",{staticClass:"btn",attrs:{type:"danger",plain:""},on:{click:function(a){return e.removefav(t)}}},[e._v("取消")]),o("el-button",{staticClass:"btn1",attrs:{type:"danger",plain:""},on:{click:function(a){return e.download(t)}}},[e._v("下载")])],1)],1)})),1)],1),o("el-dialog",{attrs:{title:"修改个人信息",visible:e.modal.visible,center:""},on:{"update:visible":function(t){return e.$set(e.modal,"visible",t)}}},[o("el-form",{staticClass:"label",attrs:{size:"mini"}},[o("el-form-item",{attrs:{label:"昵称"}},[o("el-input",{model:{value:e.modal.name,callback:function(t){e.$set(e.modal,"name",t)},expression:"modal.name"}})],1),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{key:e.passwordType,ref:"password",staticStyle:{width:"95%"},attrs:{type:e.passwordType,name:"password",tabindex:"2","auto-complete":"on"},model:{value:e.modal.loginkey,callback:function(t){e.$set(e.modal,"loginkey",t)},expression:"modal.loginkey"}}),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),o("el-form-item",{attrs:{label:"确认"}},[o("el-input",{key:e.passwordType2,ref:"password",staticStyle:{width:"95%"},attrs:{type:e.passwordType2,name:"password",tabindex:"2","auto-complete":"on"},model:{value:e.modal.confirmkey,callback:function(t){e.$set(e.modal,"confirmkey",t)},expression:"modal.confirmkey"}}),o("span",{staticClass:"show-pwd",on:{click:e.showPwd2}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType2?"eye":"eye-open"}})],1)],1),o("el-form-item",{attrs:{label:"邮箱"}},[o("el-input",{staticClass:"sw1",model:{value:e.modal.email,callback:function(t){e.$set(e.modal,"email",t)},expression:"modal.email"}}),o("el-button",{staticClass:"sw2",attrs:{type:"primary",plain:""},on:{click:e.postemail}},[e._v("获取验证码")])],1),o("el-form-item",{attrs:{label:"验证码"}},[o("el-input",{model:{value:e.modal.verifycode,callback:function(t){e.$set(e.modal,"verifycode",t)},expression:"modal.verifycode"}})],1),o("el-form-item",{attrs:{label:"头像"}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"","file-list":e.modal.pic,"before-upload":e.handlePicUpload,"list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1),o("el-form-item",{attrs:{label:"简介"}},[o("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.modal.description,callback:function(t){e.$set(e.modal,"description",t)},expression:"modal.description"}})],1),o("el-form-item",{staticClass:"search_button"},[o("el-button",{attrs:{type:"primary",plain:""},on:{click:e.submitUpload}},[e._v("提交")])],1)],1)],1)],1)],1)},i=[],s=a("1da1"),n=(a("a434"),a("ac1f"),a("1276"),a("b0c0"),a("a4d3"),a("e01a"),a("159b"),a("96cf"),a("5c96")),l=a("4ec3"),r=a("5f87"),p=a("21a6"),c={name:"Work",data:function(){return{posted:!1,prefix:{image:"https://sjh.mcl913.top:20001/"},passwordType:"password",passwordType2:"password",personal:{headpic:"",name:"",description:"",top_bg_list:[],usergroup:!1,email:""},modal:{visible:!1,pic:[],name:"",description:"",loginkey:"",email:"",verifycode:"",confirmkey:""}}},mounted:function(){this.getpersonalinfo()},methods:{logout:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(r["b"])(),e.$router.push("/login?redirect=".concat(e.$route.fullPath));case 2:case"end":return t.stop()}}),t)})))()},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},showPwd2:function(){var e=this;"password"===this.passwordType2?this.passwordType2="":this.passwordType2="password",this.$nextTick((function(){e.$refs.password.focus()}))},postemail:function(){var e=this;Object(l["g"])({email:this.modal.email}).then((function(t){n["Message"].success("邮箱已发送至"+e.modal.email);var a=e;a.posted=!0}))},removefav:function(e){var t=this;Object(l["i"])({picid:e}).then((function(a){n["Message"].success("取消收藏成功");var o=t,i=o.personal.top_bg_list.indexOf(e);o.personal.top_bg_list.splice(i,1)}))},download:function(e){Object(p["saveAs"])(this.prefix.image+e,e.split("/")[-1])},getpersonalinfo:function(){var e=this;Object(l["h"])().then((function(t){var a=e;a.personal.name=t.username,a.personal.description=t.description,a.personal.top_bg_list=[],"static/img/tou.png"==t.headpic?a.personal.headpic="None":a.personal.headpic=t.headpic,a.personal.usergroup=t.usergroup,a.personal.email=t.email,t.favpicids.forEach((function(e){var t=e.split("/"),o=t[t.length-1],i=!1;-1!=o.indexOf(".mp4")&&(i=!0),a.personal.top_bg_list.push({name:e,vid:i})}))}))},add_top_bg:function(){this.modal={visible:!0,pic:[],name:this.personal.name,description:this.personal.description,loginkey:"",confirmkey:"",email:"",verifycode:""}},handlePicUpload:function(e){return this.modal.pic=[],this.modal.pic.push(e),!1},submitUpload:function(){var e=this;if(this.posted)Object(l["n"])({email:this.modal.email,emailcode:this.modal.verifycode}).then((function(t){if("ok"==t){var a=new FormData;if(0==e.modal.pic.length||!e.personal.usergroup){if(a.append("email",e.modal.email),a.append("username",e.modal.name),a.append("description",e.modal.description),""!=e.modal.loginkey&&e.modal.loginkey==e.modal.confirmkey)a.append("password",e.modal.loginkey);else if(e.modal.loginkey!=e.modal.confirmkey)return void n["Message"].warning("两次输入的密码不一致");return void Object(l["k"])(a).then((function(t){e.modal.visible=!1}))}var o=new FormData;o.append("pic",e.modal.pic[0]),Object(l["l"])(o).then((function(t){if(a.append("email",e.modal.email),a.append("headpic",t.pic_url),a.append("username",e.modal.name),a.append("description",e.modal.description),""!=e.modal.loginkey&&e.modal.loginkey==e.modal.confirmkey)a.append("password",e.modal.loginkey);else if(e.modal.loginkey!=e.modal.confirmkey)return void n["Message"].warning("两次输入的密码不一致");Object(l["k"])(a).then((function(t){e.modal.visible=!1}))}))}else n["Message"].error("邮箱验证码错误")}));else{var t=new FormData;if(0==this.modal.pic.length||!this.personal.usergroup){if(t.append("username",this.modal.name),t.append("description",this.modal.description),""!=this.modal.loginkey&&this.modal.loginkey==this.modal.confirmkey)t.append("password",this.modal.loginkey);else if(this.modal.loginkey!=this.modal.confirmkey)return void n["Message"].warning("两次输入的密码不一致");return void Object(l["k"])(t).then((function(t){e.getpersonalinfo(),e.modal.visible=!1}))}var a=new FormData;a.append("pic",this.modal.pic[0]),Object(l["l"])(a).then((function(a){if(t.append("headpic",a.pic_url),t.append("username",e.modal.name),t.append("description",e.modal.description),""!=e.modal.loginkey&&e.modal.loginkey==e.modal.confirmkey)t.append("password",e.modal.loginkey);else if(e.modal.loginkey!=e.modal.confirmkey)return void n["Message"].warning("两次输入的密码不一致");Object(l["k"])(t).then((function(t){e.getpersonalinfo(),e.modal.visible=!1}))}))}}}},d=c,m=(a("1cb3"),a("0b1a"),a("2877")),u=Object(m["a"])(d,o,i,!1,null,"2801f54c",null);t["default"]=u.exports}}]);